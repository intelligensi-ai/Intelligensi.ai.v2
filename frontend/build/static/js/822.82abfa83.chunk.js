"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[822],{344:(e,t,r)=>{r.d(t,{Q:()=>s});const s=async e=>{if(null===e||void 0===e||!e.site_url)throw new Error("No site URL provided");const t=(e=>{try{let t=e;return t.startsWith("http://")||t.startsWith("https://")||(t=`https://${t}`),t=t.replace(/\/$/,""),`${t}/api/bulk-export`}catch(t){return console.error("Error constructing endpoint URL:",t),null}})(e.site_url);if(!t)throw new Error("Invalid site URL");const r="http://127.0.0.1:5001/intelligensi-ai-v2/us-central1";const s=`${r}/drupal7/structure?endpoint=${encodeURIComponent(t)}`,n=await fetch(s);if(!n.ok)throw new Error(`Server returned ${n.status}: ${n.statusText}`);return(await n.json()).structure||[]}},441:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var s=r(565),n=r(344),l=r(929);const a=e=>{let{site:t,onClose:r}=e;const[a,o]=(0,s.useState)([]),[i,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(null),[h,x]=(0,s.useState)(new Set);(0,s.useEffect)((()=>{(async()=>{try{c(!0),u(null);const e=await(0,n.Q)(t);o(e)}catch(e){console.error("Content fetch error:",e),u(e instanceof Error?e.message:"An unexpected error occurred while fetching content")}finally{c(!1)}})()}),[t.site_url]);const m=e=>{if(!e)return"";const t=document.createElement("textarea");t.innerHTML=e;let r=t.value;return r=r.replace(/<[^>]*>?/gm,"").replace(/\\(r|n|"|')/g,"").replace(/\s+/g," ").trim(),r},p=(e,t)=>{const r=m(e).split("\n");return h.has(t)?r.join("\n"):r.slice(0,3).join("\n")},f=e=>{try{return new Date(1e3*parseInt(e)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Unknown date"}};return(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e=>e.target===e.currentTarget&&r(),children:(0,l.jsxs)("div",{className:"bg-[#2D3748] rounded-lg p-6 w-full max-w-4xl max-h-[90vh] flex flex-col",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsxs)("h2",{className:"text-xl font-bold text-white",children:["Content Preview: ",t.site_name]}),(0,l.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors","aria-label":"Close preview",children:(0,l.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,l.jsx)("div",{className:"overflow-y-auto flex-1",children:i?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center h-32 space-y-2",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"}),(0,l.jsx)("p",{className:"text-gray-400",children:"Loading content..."})]}):d?(0,l.jsxs)("div",{className:"text-red-400 p-4 bg-[#344054] rounded flex flex-col space-y-2",children:[(0,l.jsx)("p",{className:"font-medium",children:"Could not load content"}),(0,l.jsx)("p",{className:"text-sm",children:d}),(0,l.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-2 text-sm text-blue-400 hover:text-blue-300 self-start",children:"Try again"})]}):0===a.length?(0,l.jsx)("div",{className:"text-gray-400 italic p-4 bg-[#344054] rounded",children:"No content found for this site."}):(0,l.jsx)("div",{className:"space-y-4 pr-2",children:a.map((e=>(0,l.jsxs)("div",{className:"bg-[#344054] p-4 rounded-lg border border-gray-600 transition-colors hover:border-gray-500",children:[(0,l.jsx)("h3",{className:"font-bold text-lg text-teal-400 mb-1",children:e.title}),(0,l.jsxs)("div",{className:"text-xs text-gray-400 mb-2",children:[f(e.created)," | ",e.type," | ","1"===e.status?"Published":"Unpublished"]}),(0,l.jsx)("div",{className:"text-gray-300 whitespace-pre-line",children:p(e.body,e.nid)}),m(e.body).split("\n").length>3&&(0,l.jsx)("button",{onClick:()=>{return t=e.nid,void x((e=>{const r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r}));var t},className:"mt-2 text-sm text-blue-400 hover:text-blue-300 transition-colors",children:h.has(e.nid)?"Show less":"Read more..."})]},e.nid)))})}),(0,l.jsx)("div",{className:"mt-4 flex justify-end border-t border-gray-700 pt-4",children:(0,l.jsx)("button",{onClick:r,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded text-white transition-colors",children:"Close Preview"})})]})})}}}]);
//# sourceMappingURL=822.82abfa83.chunk.js.map